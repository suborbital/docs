"use strict";(self.webpackChunksuborbital_docs=self.webpackChunksuborbital_docs||[]).push([[8713],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),u=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=u(e.components);return a.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,b=d["".concat(p,".").concat(m)]||d[m]||c[m]||i;return n?a.createElement(b,o(o({ref:t},s),{},{components:n})):a.createElement(b,o({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},701:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return c}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],l={},p="Using Compute from JavaScript or TypeScript",u={unversionedId:"compute/quickstart/client-libraries/nodejs",id:"compute/quickstart/client-libraries/nodejs",title:"Using Compute from JavaScript or TypeScript",description:"Use our JavaScript SDK to easily interact with Compute's APIs using JavaScript or Typescript.",source:"@site/docs/compute/quickstart/client-libraries/nodejs.md",sourceDirName:"compute/quickstart/client-libraries",slug:"/compute/quickstart/client-libraries/nodejs",permalink:"/docs/laura/59-add-missing-put-options-head-request-docs-to-the-http-runtime-api/compute/quickstart/client-libraries/nodejs",draft:!1,editUrl:"https://github.com/suborbital/docs/edit/main/website/docs/compute/quickstart/client-libraries/nodejs.md",tags:[],version:"current",lastUpdatedAt:1647288527,formattedLastUpdatedAt:"3/14/2022",frontMatter:{},sidebar:"docs",previous:{title:"Connect your application",permalink:"/docs/laura/59-add-missing-put-options-head-request-docs-to-the-http-runtime-api/compute/quickstart/connect-your-application"},next:{title:"Using Compute from Go",permalink:"/docs/laura/59-add-missing-put-options-head-request-docs-to-the-http-runtime-api/compute/quickstart/client-libraries/golang"}},s={},c=[{value:"Installation",id:"installation",level:2},{value:"Setup",id:"setup",level:2},{value:"Default Config",id:"default-config",level:3},{value:"Local config",id:"local-config",level:3},{value:"Custom API URLs or ports:",id:"custom-api-urls-or-ports",level:3},{value:"Getting started",id:"getting-started",level:2},{value:"Example output",id:"example-output",level:3},{value:"Full API",id:"full-api",level:2},{value:"Admin:",id:"admin",level:3},{value:"<code>suborbital.admin.getToken</code>",id:"suborbitaladmingettoken",level:4},{value:"<code>suborbital.admin.getFunctions</code>",id:"suborbitaladmingetfunctions",level:4},{value:"<code>suborbital.admin.getFunctionResults</code>",id:"suborbitaladmingetfunctionresults",level:4},{value:"<code>suborbital.admin.getFunctionErrors</code>",id:"suborbitaladmingetfunctionerrors",level:4},{value:"Exec:",id:"exec",level:3},{value:"<code>suborbital.exec.run</code>",id:"suborbitalexecrun",level:4},{value:"Builder:",id:"builder",level:3},{value:"<code>suborbital.builder.build</code>",id:"suborbitalbuilderbuild",level:4},{value:"<code>suborbital.builder.getDraft</code>",id:"suborbitalbuildergetdraft",level:4},{value:"<code>suborbital.builder.deployDraft</code>",id:"suborbitalbuilderdeploydraft",level:4},{value:"<code>suborbital.builder.testDraft</code>",id:"suborbitalbuildertestdraft",level:4},{value:"<code>suborbital.builder.getTemplate</code>",id:"suborbitalbuildergettemplate",level:4}],d={toc:c};function m(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"using-compute-from-javascript-or-typescript"},"Using Compute from JavaScript or TypeScript"),(0,i.kt)("p",null,"Use ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/suborbital/compute-node"},"our JavaScript SDK")," to easily interact with Compute's APIs using JavaScript or Typescript."),(0,i.kt)("h2",{id:"installation"},"Installation"),(0,i.kt)("p",null,"Install it via ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"npm"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"yarn add @suborbital/compute\n")),(0,i.kt)("p",null,"or:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"npm install @suborbital/compute\n")),(0,i.kt)("h2",{id:"setup"},"Setup"),(0,i.kt)("p",null,"Import the library and configure the client. The default configuration will point the client at Compute's default production URLs in your cluster. "),(0,i.kt)("p",null,"A configuration for local development is also provided."),(0,i.kt)("h3",{id:"default-config"},"Default Config"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Suborbital } from "@suborbital/compute";\n\nconst suborbital = new Suborbital(configuration);\n')),(0,i.kt)("h3",{id:"local-config"},"Local config"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Suborbital, localConfig } from "@suborbital/compute";\n\nconst suborbital = new Suborbital(localConfig);\n')),(0,i.kt)("h3",{id:"custom-api-urls-or-ports"},"Custom API URLs or ports:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},'import { Suborbital } from "@suborbital/compute";\n\nconst configuration = {\n  adminUri: "https://acme.co:8081",\n  execUri: "https://acme.co:8080",\n  builderUri: "https://acme.co/builder",\n};\n\nconst suborbital = new Suborbital(configuration);\n')),(0,i.kt)("h2",{id:"getting-started"},"Getting started"),(0,i.kt)("p",null,"Using the ",(0,i.kt)("a",{parentName:"p",href:"/docs/laura/59-add-missing-put-options-head-request-docs-to-the-http-runtime-api/compute/api-reference/"},"Compute APIs"),", this guide will use the Administrative and Execution APIs to get a list of available functions and execute one."),(0,i.kt)("p",null,"The Administrative API's ",(0,i.kt)("inlineCode",{parentName:"p"},"getFunctions")," method takes an object with a ",(0,i.kt)("inlineCode",{parentName:"p"},"userId")," and a ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace")," and returns a list of available functions for that user in the provided namespace."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},'async function listAvailableFunctions() {\n  const functionList = await suborbital.admin.getFunctions({\n    userId: "1234",\n    namespace: "default",\n  });\n\n  console.log("Functions:", functions);\n}\n')),(0,i.kt)("h3",{id:"example-output"},"Example output"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "functions": [\n        {\n            "name": "foo",\n            "namespace": "...",\n            "lang": "...",\n            "version": "...",\n            "draftVersion": "...",\n            "apiVersion": "...",\n            "fqfn": "...",\n            "fqfnURI": "...",\n        }\n    ]\n}\n')),(0,i.kt)("p",null,"The result includes a function named ",(0,i.kt)("inlineCode",{parentName:"p"},"foo")," (which for this tutorial already exists) and which we will execute using the Execution API's ",(0,i.kt)("inlineCode",{parentName:"p"},"run")," method. "),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"run")," method takes an object with the ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"fnName"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"version"),", and returns the result of the executed function."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-typescript"},'async function runFunction() {\n  const result = await suborbital.exec.run({\n    environment: "com.acmeco",\n    userId: "1234",\n    namespace: "default",\n    fnName: "foo",\n    version: "v1.0.0",\n  });\n\n  console.log("Function output:", result);\n}\n')),(0,i.kt)("h2",{id:"full-api"},"Full API"),(0,i.kt)("p",null,"These are all of the available methods."),(0,i.kt)("h3",{id:"admin"},"Admin:"),(0,i.kt)("h4",{id:"suborbitaladmingettoken"},(0,i.kt)("inlineCode",{parentName:"h4"},"suborbital.admin.getToken")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Description"),": Retrieves an authentication token for the given function, typically used to authenticate calls to the Builder API.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Args:")," An object containing ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"fnName"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Result:")," A string containing the token used for authorization."),(0,i.kt)("h4",{id:"suborbitaladmingetfunctions"},(0,i.kt)("inlineCode",{parentName:"h4"},"suborbital.admin.getFunctions")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Description:")," Returns a list of available functions for the given user in the given namespace.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Args:")," An object containing ",(0,i.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Result:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "functions": [\n        {\n            "name": "foo",\n            "namespace": "...",\n            "lang": "...",\n            "version": "...",\n            "draftVersion": "...",\n            "apiVersion": "...",\n            "fqfn": "...",\n            "fqfnURI": "...",\n        }\n    ]\n}\n')),(0,i.kt)("h4",{id:"suborbitaladmingetfunctionresults"},(0,i.kt)("inlineCode",{parentName:"h4"},"suborbital.admin.getFunctionResults")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Description:")," Returns the most recent results (up to 5) produced by the execution of the given function.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Args:")," An object containing ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"fnName"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"version"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Result:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "results": [\n        {\n            "uuid": "...",\n            "timestamp": "...",\n            "response": "..."\n        }\n    ]\n}\n')),(0,i.kt)("h4",{id:"suborbitaladmingetfunctionerrors"},(0,i.kt)("inlineCode",{parentName:"h4"},"suborbital.admin.getFunctionErrors")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Description:")," Returns the most recent errors (up to 5) produced by the execution of the given function.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Args:")," An object containing ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"fnName"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"version"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Result:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "errors": [\n        {\n            "uuid": "...",\n            "timestamp": "...",\n            "code": 400,\n            "message": "..."\n        }\n    ]\n}\n')),(0,i.kt)("h3",{id:"exec"},"Exec:"),(0,i.kt)("h4",{id:"suborbitalexecrun"},(0,i.kt)("inlineCode",{parentName:"h4"},"suborbital.exec.run")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Description:")," Executes the given function, with the provided body, params and state loaded into the function at runtime.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Args:")," An object containing ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),",",(0,i.kt)("inlineCode",{parentName:"p"},"userId"),",",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"fnName"),",",(0,i.kt)("inlineCode",{parentName:"p"},"version"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Result:")," The result of the executed function."),(0,i.kt)("h3",{id:"builder"},"Builder:"),(0,i.kt)("h4",{id:"suborbitalbuilderbuild"},(0,i.kt)("inlineCode",{parentName:"h4"},"suborbital.builder.build")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Description:")," Builds the provided code using the specified language toolchain.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Args:")," An object containing ",(0,i.kt)("inlineCode",{parentName:"p"},"language"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"fnName"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"token"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Result:")," A string containing the logs for the build.  "),(0,i.kt)("h4",{id:"suborbitalbuildergetdraft"},(0,i.kt)("inlineCode",{parentName:"h4"},"suborbital.builder.getDraft")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Description:")," Gets the draft for the specified runnable.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Args:")," An object containing ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"fnName"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"token"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Result:")," A specified runnable.  "),(0,i.kt)("h4",{id:"suborbitalbuilderdeploydraft"},(0,i.kt)("inlineCode",{parentName:"h4"},"suborbital.builder.deployDraft")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Description:")," Deploys the specified runnable.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Args:")," An object containing ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"fnName"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"token"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Result:")," A string containing the version.  "),(0,i.kt)("h4",{id:"suborbitalbuildertestdraft"},(0,i.kt)("inlineCode",{parentName:"h4"},"suborbital.builder.testDraft")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Description:")," Tests the draft for the specified runnable.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Args:")," An object containing ",(0,i.kt)("inlineCode",{parentName:"p"},"environment"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"userId"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"fnName"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Result:")," A string containing the result.  "),(0,i.kt)("h4",{id:"suborbitalbuildergettemplate"},(0,i.kt)("inlineCode",{parentName:"h4"},"suborbital.builder.getTemplate")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Description:")," Gets the template (which controls what your users see when they create a new function) for a new function of the given language.",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Args:")," An object containing ",(0,i.kt)("inlineCode",{parentName:"p"},"fnName"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"language"),".",(0,i.kt)("br",{parentName:"p"}),"\n",(0,i.kt)("strong",{parentName:"p"},"Result:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-rust"},'  //Example template for rust language \n  import { logInfo } from "@suborbital/suborbital"\n\n  export function run(input: ArrayBuffer): ArrayBuffer {\n    let inStr = String.UTF8.decode(input)\n\n    let out = "Hello there, " + inStr\n\n    return String.UTF8.encode(out)\n  }\n')))}m.isMDXComponent=!0}}]);
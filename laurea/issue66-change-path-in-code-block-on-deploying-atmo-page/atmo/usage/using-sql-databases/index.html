<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">Using SQL databases | Suborbital Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.suborbital.dev/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/usage/using-sql-databases"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Using SQL databases | Suborbital Documentation"><meta data-react-helmet="true" name="description" content="To connect Atmo with your SQL database, you will define the"><meta data-react-helmet="true" property="og:description" content="To connect Atmo with your SQL database, you will define the"><link data-react-helmet="true" rel="icon" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/img/SOS_SubOrb-Icon-FullColour.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.suborbital.dev/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/usage/using-sql-databases"><link data-react-helmet="true" rel="alternate" href="https://docs.suborbital.dev/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/usage/using-sql-databases" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.suborbital.dev/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/usage/using-sql-databases" hreflang="x-default"><link rel="stylesheet" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/assets/css/styles.586ae350.css">
<link rel="preload" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/assets/js/runtime~main.899f0344.js" as="script">
<link rel="preload" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/assets/js/main.c546d661.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/"><div class="navbar__logo"><img src="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/img/suborbital-logo-wide-trim.svg" alt="Suborbital Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/img/suborbital-logo-wide-trim.svg" alt="Suborbital Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title"></b></a></div><div class="navbar__items navbar__items--right"><a href="https://suborbital.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Homepage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://blog.suborbital.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/suborbital" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/suborbital-ecosystem/the-suborbital-ecosystem">The Suborbital Ecosystem</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/intro-to-webassembly/history">Intro to WebAssembly</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/compute/">Compute</a><button aria-label="Toggle the collapsible sidebar category &#x27;Compute&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_VCh3" aria-current="page" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/">Atmo</a><button aria-label="Toggle the collapsible sidebar category &#x27;Atmo&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/get-started">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/concepts/runnables">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/concepts/runnables">Runnables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/concepts/the-directive">The Directive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/concepts/state">State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/concepts/static-directory">Static Directory</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/usage/creating-runnables">Usage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/runnable-api/introduction">Runnable API</a><button aria-label="Toggle the collapsible sidebar category &#x27;Runnable API&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/runnable-api/request">Handling requests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/runnable-api/response">Modifying responses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/runnable-api/logging">Structured logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/runnable-api/http-client">HTTP client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/runnable-api/graphql-client">GraphQL client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/usage/using-sql-databases">Using SQL databases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/runnable-api/cache">Accessing cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/runnable-api/file">Static files</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/background">Background</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/sat/">Sat</a><button aria-label="Toggle the collapsible sidebar category &#x27;Sat&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/subo/">Subo</a><button aria-label="Toggle the collapsible sidebar category &#x27;Subo&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/reactr/">Building Blocks</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/contributing-guide/contributing-to-suborbital">Contributing to Suborbital</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Using SQL databases</h1><p>To connect Atmo with your SQL database, you will define the
connection using the <code>connections</code> section of the Directive,
and then define queries that your Runnables can execute.
Runnables are not allowed to execute arbitrary queries.
Instead, a list of named queries are provided in a Queries.yaml file.
Your Runnables are then allowed to execute them.</p><p>If you haven&#x27;t already, take a look at Connections to define the connection
to your database, then come back here.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>This feature is in preview!</h5></div><div class="admonition-content"><p>Atmo&#x27;s Database capability is in preview, and we would love your feedback on
the approach as well as the Rust APIs. We are eager to improve it, and we hope
you&#x27;ll try it out!</p><p>Please join our <a href="http://chat.suborbital.dev" target="_blank" rel="noopener noreferrer">Discord</a> to give us feedback.</p></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="defining-queries">Defining queries<a class="hash-link" href="#defining-queries" title="Direct link to heading">​</a></h2><p>Once the connection to your database is defined, create a <code>Queries.yaml</code> file
in your project&#x27;s directory, right next to <code>Directive.yaml</code>.</p><p>It will have this structure:</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">queries</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;InsertUser&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      INSERT INTO users (uuid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> email</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> created_at</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> identifier)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      VALUES ($1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> NOW()</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;A&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> 12345)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SelectUserWithUUID&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      SELECT * FROM users</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      WHERE uuid = $1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;UpdateUserWithUUID&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">|</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      UPDATE users SET state=&#x27;B&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      WHERE uuid = $1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You can define any number of queries. Each query must have a name and a query value.</p><p>Queries can optionally have a <code>type</code> field (specifying <code>select | update | insert | delete</code>)
and a <code>varCount</code> field to specify the number of variables in the query. In most circumstances,
these optional fields are detected automatically by Atmo, but if for any reason they are
detected incorrectly, you can set them explicitly.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="query-variables">Query variables<a class="hash-link" href="#query-variables" title="Direct link to heading">​</a></h2><p>Queries can contain variables in either the MySQL style <code>?</code> or in the PostgreSQL style <code>$1</code>.
Both will be auto-detected by Atmo, and Runnables will be required to provide the correct
number of arguments to fill those variables whenever a query is called.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="how-it-works">How it works<a class="hash-link" href="#how-it-works" title="Direct link to heading">​</a></h2><p>SQL queries in Atmo are automatically turned into prepared statements that ensure your
queries are executed safely. Atmo uses industry-standard database drivers to maintain
a connection pool with your database. Runnables are allowed to execute the defined
queries and provide the arguments to be inserted into those queries. Your code does
not need to concern itself with the underlying database connections, pooling, credentials, etc.
You can focus on building your business logic.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="executing-queries">Executing queries<a class="hash-link" href="#executing-queries" title="Direct link to heading">​</a></h2><p>Once you&#x27;ve defined queries in your Queries.yaml file,
the <code>suborbital</code> Rust crate has APIs for executing various query types:</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx rust"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">use suborbital::runnable::*;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use suborbital::db;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use suborbital::db::query;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use suborbital::log;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use uuid::Uuid;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">struct CreateUser{}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">impl Runnable for CreateUser {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fn run(&amp;self, _: Vec&lt;u8&gt;) -&gt; Result&lt;Vec&lt;u8&gt;, RunErr&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        let uuid = Uuid::new_v4().to_string();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        let mut args: Vec&lt;query::QueryArg&gt; = Vec::new();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        args.push(query::QueryArg::new(&quot;uuid&quot;, uuid.as_str()));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        args.push(query::QueryArg::new(&quot;email&quot;, &quot;connor@suborbital.dev&quot;));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        match db::insert(&quot;InsertUser&quot;, args) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Ok(_) =&gt; log::info(&quot;insert successful&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Err(e) =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                return Err(RunErr::new(500, e.message.as_str()))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        let mut args2: Vec&lt;query::QueryArg&gt; = Vec::new();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        args2.push(query::QueryArg::new(&quot;uuid&quot;, uuid.as_str()));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        match db::update(&quot;UpdateUserWithUUID&quot;, args2.clone()) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Ok(_) =&gt; log::info(&quot;update successful&quot;),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Err(e) =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                return Err(RunErr::new(500, e.message.as_str()))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        match db::select(&quot;SelectUserWithUUID&quot;, args2) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Ok(result) =&gt; Ok(result),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Err(e) =&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                Err(RunErr::new(500, e.message.as_str()))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// initialize the runner, do not edit below //</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">static RUNNABLE: &amp;CreateUser = &amp;CreateUser{};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#[no_mangle]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub extern fn _start() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    use_runnable(RUNNABLE);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Runnables can execute any of the queries defined in <code>Queries.yaml</code>.
The <code>args</code> they provide are inserted into the queries&#x27; variables by Atmo, and then executed.
The query&#x27;s results are returned to the Runnable in JSON form.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/suborbital/docs/docs/atmo/usage/using-sql-databases.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-02-16T19:59:56.000Z">2/16/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/runnable-api/graphql-client"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">GraphQL client</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/atmo/runnable-api/cache"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Accessing cache</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#defining-queries" class="table-of-contents__link toc-highlight">Defining queries</a></li><li><a href="#query-variables" class="table-of-contents__link toc-highlight">Query variables</a></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How it works</a></li><li><a href="#executing-queries" class="table-of-contents__link toc-highlight">Executing queries</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://chat.suborbital.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/suborbital" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/SuborbitalDev" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items"><li class="footer__item"><a href="https://blog.suborbital.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://suborbital.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Suborbital Contributors. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/assets/js/runtime~main.899f0344.js"></script>
<script src="/docs/laurea/issue66-change-path-in-code-block-on-deploying-atmo-page/assets/js/main.c546d661.js"></script>
</body>
</html>